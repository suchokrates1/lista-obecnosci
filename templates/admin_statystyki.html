{% extends 'base.html' %}
{% block title %}Statystyki{% endblock %}
{% block content %}
  <h2 class="mb-4">Statystyki obecności - {{ prowadzacy.imie }} {{ prowadzacy.nazwisko }}</h2>
  <table class="table table-striped table-hover mb-4" id="admin-stats">
    {% set w = table_widths.get('admin-stats', []) %}
    <thead class="table-secondary">
      <tr>
        <th class="name-col col-admin-stats-name"{% if w|length > 0 %} style="width: {{ w[0] }}%"{% endif %}>Uczestnik</th>
        <th class="participants-col col-admin-stats-present"{% if w|length > 1 %} style="width: {{ w[1] }}%"{% endif %}>Obecności</th>
        <th class="col-admin-stats-percent"{% if w|length > 2 %} style="width: {{ w[2] }}%"{% endif %}>Frekwencja</th>
      </tr>
    </thead>
    <tbody>
      {% for row in stats %}
      <tr>
        <td class="name-col col-admin-stats-name">{{ row.uczestnik.imie_nazwisko }}</td>
        <td class="participants-col col-admin-stats-present">{{ row.present }}/{{ total_sessions }}</td>
        <td class="col-admin-stats-percent">{{ '%.0f'|format(row.percent) }}%</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <a href="{{ url_for('routes.admin_dashboard') }}" class="btn btn-secondary">Powrót</a>
{% endblock %}
